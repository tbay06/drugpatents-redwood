import { db } from "..\\..\\lib\\db";
import { UserInputError } from '@redwoodjs/api';

const validate = input => {
  if (input.email && !input.email.match(/[^@]+@[^.]+\..+/)) {
    throw new UserInputError("Can't create new contact", {
      messages: {
        email: ['is not formatted like an email address']
      }
    });
  }
};

export const contacts = () => {
  return db.contact.findMany();
};
export const createContact = ({
  input
}) => {
  validate(input);
  return db.contact.create({
    data: input
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2FwaS9zcmMvc2VydmljZXMvY29udGFjdHMvY29udGFjdHMuanMiXSwibmFtZXMiOlsiZGIiLCJVc2VySW5wdXRFcnJvciIsInZhbGlkYXRlIiwiaW5wdXQiLCJlbWFpbCIsIm1hdGNoIiwibWVzc2FnZXMiLCJjb250YWN0cyIsImNvbnRhY3QiLCJmaW5kTWFueSIsImNyZWF0ZUNvbnRhY3QiLCJjcmVhdGUiLCJkYXRhIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxFQUFUO0FBQ0EsU0FBU0MsY0FBVCxRQUErQixnQkFBL0I7O0FBRUEsTUFBTUMsUUFBUSxHQUFJQyxLQUFELElBQVc7QUFDMUIsTUFBSUEsS0FBSyxDQUFDQyxLQUFOLElBQWUsQ0FBQ0QsS0FBSyxDQUFDQyxLQUFOLENBQVlDLEtBQVosQ0FBa0IsaUJBQWxCLENBQXBCLEVBQTBEO0FBQ3hELFVBQU0sSUFBSUosY0FBSixDQUFtQiwwQkFBbkIsRUFBOEM7QUFDbERLLE1BQUFBLFFBQVEsRUFBRTtBQUNSRixRQUFBQSxLQUFLLEVBQUUsQ0FBQyx3Q0FBRDtBQURDO0FBRHdDLEtBQTlDLENBQU47QUFLRDtBQUNGLENBUkQ7O0FBVUEsT0FBTyxNQUFNRyxRQUFRLEdBQUcsTUFBTTtBQUM1QixTQUFPUCxFQUFFLENBQUNRLE9BQUgsQ0FBV0MsUUFBWCxFQUFQO0FBQ0QsQ0FGTTtBQUlQLE9BQU8sTUFBTUMsYUFBYSxHQUFHLENBQUM7QUFBRVAsRUFBQUE7QUFBRixDQUFELEtBQWU7QUFDMUNELEVBQUFBLFFBQVEsQ0FBQ0MsS0FBRCxDQUFSO0FBQ0EsU0FBT0gsRUFBRSxDQUFDUSxPQUFILENBQVdHLE1BQVgsQ0FBa0I7QUFBRUMsSUFBQUEsSUFBSSxFQUFFVDtBQUFSLEdBQWxCLENBQVA7QUFDRCxDQUhNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tICdzcmMvbGliL2RiJ1xyXG5pbXBvcnQgeyBVc2VySW5wdXRFcnJvciB9IGZyb20gJ0ByZWR3b29kanMvYXBpJ1xyXG5cclxuY29uc3QgdmFsaWRhdGUgPSAoaW5wdXQpID0+IHtcclxuICBpZiAoaW5wdXQuZW1haWwgJiYgIWlucHV0LmVtYWlsLm1hdGNoKC9bXkBdK0BbXi5dK1xcLi4rLykpIHtcclxuICAgIHRocm93IG5ldyBVc2VySW5wdXRFcnJvcihcIkNhbid0IGNyZWF0ZSBuZXcgY29udGFjdFwiLHtcclxuICAgICAgbWVzc2FnZXM6IHtcclxuICAgICAgICBlbWFpbDogWydpcyBub3QgZm9ybWF0dGVkIGxpa2UgYW4gZW1haWwgYWRkcmVzcyddLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb250YWN0cyA9ICgpID0+IHtcclxuICByZXR1cm4gZGIuY29udGFjdC5maW5kTWFueSgpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVDb250YWN0ID0gKHsgaW5wdXQgfSkgPT4ge1xyXG4gIHZhbGlkYXRlKGlucHV0KVxyXG4gIHJldHVybiBkYi5jb250YWN0LmNyZWF0ZSh7IGRhdGE6IGlucHV0IH0pXHJcbn1cclxuIl19